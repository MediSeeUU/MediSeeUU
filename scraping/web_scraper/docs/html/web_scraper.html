<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>web_scraper package &mdash; Web Scraper 1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="web_scraper.tests package" href="web_scraper.tests.html" />
    <link rel="prev" title="web_scraper" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Web Scraper
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">web_scraper</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">web_scraper package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html">web_scraper.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.webscraper_tests.html">web_scraper.webscraper_tests package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-web_scraper.download">web_scraper.download module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.dos2unix"><code class="docutils literal notranslate"><span class="pre">dos2unix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.download_all"><code class="docutils literal notranslate"><span class="pre">download_all()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.download_medicine_files"><code class="docutils literal notranslate"><span class="pre">download_medicine_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.download_pdf_from_url"><code class="docutils literal notranslate"><span class="pre">download_pdf_from_url()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.download_pdfs_ec"><code class="docutils literal notranslate"><span class="pre">download_pdfs_ec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.download_pdfs_ema"><code class="docutils literal notranslate"><span class="pre">download_pdfs_ema()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.download.read_csv_files"><code class="docutils literal notranslate"><span class="pre">read_csv_files()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-web_scraper.ec_scraper">web_scraper.ec_scraper module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.MedicineType"><code class="docutils literal notranslate"><span class="pre">MedicineType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.determine_current_aut_type"><code class="docutils literal notranslate"><span class="pre">determine_current_aut_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.determine_ema_number"><code class="docutils literal notranslate"><span class="pre">determine_ema_number()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.determine_initial_aut_type"><code class="docutils literal notranslate"><span class="pre">determine_initial_aut_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.format_ema_number"><code class="docutils literal notranslate"><span class="pre">format_ema_number()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.get_data_from_medicine_json"><code class="docutils literal notranslate"><span class="pre">get_data_from_medicine_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.get_data_from_procedures_json"><code class="docutils literal notranslate"><span class="pre">get_data_from_procedures_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.get_ec_html"><code class="docutils literal notranslate"><span class="pre">get_ec_html()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.get_ec_json_objects"><code class="docutils literal notranslate"><span class="pre">get_ec_json_objects()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.scrape_active_withdrawn_jsons"><code class="docutils literal notranslate"><span class="pre">scrape_active_withdrawn_jsons()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.scrape_medicine_page"><code class="docutils literal notranslate"><span class="pre">scrape_medicine_page()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.scrape_medicines_list"><code class="docutils literal notranslate"><span class="pre">scrape_medicines_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ec_scraper.scrape_refused_jsons"><code class="docutils literal notranslate"><span class="pre">scrape_refused_jsons()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-web_scraper.ema_scraper">web_scraper.ema_scraper module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.ema_scraper.pdf_links_from_url"><code class="docutils literal notranslate"><span class="pre">pdf_links_from_url()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-web_scraper.utils">web_scraper.utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web_scraper.utils.exception_retry"><code class="docutils literal notranslate"><span class="pre">exception_retry()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-web_scraper">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Web Scraper</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">web_scraper</a> &raquo;</li>
      <li>web_scraper package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/web_scraper.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="web-scraper-package">
<h1>web_scraper package<a class="headerlink" href="#web-scraper-package" title="Permalink to this heading"></a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="web_scraper.tests.html">web_scraper.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.tests.html#module-web_scraper.tests.test_download">web_scraper.tests.test_download module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_download.TestDownload"><code class="docutils literal notranslate"><span class="pre">TestDownload</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_download.TestDownload.test_download_epar_from_url"><code class="docutils literal notranslate"><span class="pre">TestDownload.test_download_epar_from_url()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_download.TestDownload.test_download_pdf_from_url"><code class="docutils literal notranslate"><span class="pre">TestDownload.test_download_pdf_from_url()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_download.TestDownload.test_download_pdfs"><code class="docutils literal notranslate"><span class="pre">TestDownload.test_download_pdfs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_download.TestDownload.test_read_csv_files"><code class="docutils literal notranslate"><span class="pre">TestDownload.test_read_csv_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_download.TestDownload.test_run_parallel"><code class="docutils literal notranslate"><span class="pre">TestDownload.test_run_parallel()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.tests.html#module-web_scraper.tests.test_ec_scraper">web_scraper.tests.test_ec_scraper module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ec_scraper.test_get_data_from_medicine_json"><code class="docutils literal notranslate"><span class="pre">test_get_data_from_medicine_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ec_scraper.test_get_data_from_procedures_json"><code class="docutils literal notranslate"><span class="pre">test_get_data_from_procedures_json()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.tests.html#module-web_scraper.tests.test_ec_scraper_old">web_scraper.tests.test_ec_scraper_old module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ec_scraper_old.TestEcScraper"><code class="docutils literal notranslate"><span class="pre">TestEcScraper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ec_scraper_old.TestEcScraper.test_scrape_medicine_list"><code class="docutils literal notranslate"><span class="pre">TestEcScraper.test_scrape_medicine_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ec_scraper_old.TestEcScraper.test_scrape_medicine_page"><code class="docutils literal notranslate"><span class="pre">TestEcScraper.test_scrape_medicine_page()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.tests.html#module-web_scraper.tests.test_ema_scraper">web_scraper.tests.test_ema_scraper module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ema_scraper.TestEMAScraper"><code class="docutils literal notranslate"><span class="pre">TestEMAScraper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="web_scraper.tests.html#web_scraper.tests.test_ema_scraper.TestEMAScraper.test_pdf_links_from_url"><code class="docutils literal notranslate"><span class="pre">TestEMAScraper.test_pdf_links_from_url()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.tests.html#module-web_scraper.tests">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_scraper.webscraper_tests.html">web_scraper.webscraper_tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_scraper.webscraper_tests.html#module-web_scraper.webscraper_tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-web_scraper.download">
<span id="web-scraper-download-module"></span><h2>web_scraper.download module<a class="headerlink" href="#module-web_scraper.download" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.dos2unix">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">dos2unix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f_in</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.dos2unix" title="Permalink to this definition"></a></dt>
<dd><p>Helper function that converts a windows csv file to linux csv files.
It takes a CSV file, replaces the line endings and writes this to another csv file.
After this the new csv file will replace the old csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f_in</strong> (<em>str</em>) – The filepath towards the to-be-converted csv file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns nothing</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.download_all">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">download_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parallel_download</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.download_all" title="Permalink to this definition"></a></dt>
<dd><p>Downloads all files for all medicines. Can be done parallel or sequential.
First it reads the CSV files, and then calls download_medicine_files function for all medicines.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parallel_download</strong> (<em>bool</em>) – If this boolean is set to True, the files will be downloaded parallel</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns nothing</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.download_medicine_files">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">download_medicine_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eu_n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epar</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">med_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.download_medicine_files" title="Permalink to this definition"></a></dt>
<dd><p>Downloads all the pdf files that belong to a medicine.
Logs succesful downloads and also logs if not all files could be downloaded for a specific medicine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eu_n</strong> (<em>str</em>) – The EU number of the medicine where we want to download the files of</p></li>
<li><p><strong>dec</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the urls of the decisions pdf files</p></li>
<li><p><strong>anx</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the urls of the annexes pdf files</p></li>
<li><p><strong>epar</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the urls of the EMA website files</p></li>
<li><p><strong>med_info</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the attributes of a specific medicine.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns nothing</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.download_pdf_from_url">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">download_pdf_from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eu_num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename_elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.download_pdf_from_url" title="Permalink to this definition"></a></dt>
<dd><p>Downloads a pdf file given an url. It also gives the file a specific name based on the input.
The file will be downloaded to the corresponding EU number folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – the url towards the page where the pdf file is found</p></li>
<li><p><strong>eu_num</strong> (<em>str</em>) – the EU number of the medicine where the pdf belongs to, also used to locate correct folder</p></li>
<li><p><strong>filename_elements</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list containing the filename elements: human/orphan, active/withdrawn, pdf type and file_index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns nothing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.download_pdfs_ec">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">download_pdfs_ec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eu_num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdf_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdf_url_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">med_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.download_pdfs_ec" title="Permalink to this definition"></a></dt>
<dd><p>Downloads the pdfs of the EC website files for a specific medicine and a specific file type (decision or annex)
It evaluates the string in the pdf_url_dict to a list of urls which then can be used for downloading with the
download_pdf_from_url function.
The filename_elements used for structuring the filename are also specified in this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eu_num</strong> (<em>str</em>) – The EU number of the medicine where the files should be downloaded for.</p></li>
<li><p><strong>pdf_type</strong> (<em>str</em>) – The type of pdf: decision or annex</p></li>
<li><p><strong>pdf_url_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the urls to the pdf files.</p></li>
<li><p><strong>med_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the attributes of the medicine. Used for structuring the filename</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns nothing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.download_pdfs_ema">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">download_pdfs_ema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eu_num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epar_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">med_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.download_pdfs_ema" title="Permalink to this definition"></a></dt>
<dd><p>Downloads the pdfs of the EMA website files for a specific medicine.
It gets the url from the epar dictionary which is used for downloading with the download_pdf_from_url function.
The filename_elements used for structuring the filename are also specified in this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eu_num</strong> (<em>str</em>) – The EU number of the medicine where the files should be downloaded for.</p></li>
<li><p><strong>epar_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the urls to the epar pdf files.</p></li>
<li><p><strong>med_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – The dictionary containing the attributes of the medicine. Used for structuring the filename</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns nothing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.download.read_csv_files">
<span class="sig-prename descclassname"><span class="pre">web_scraper.download.</span></span><span class="sig-name descname"><span class="pre">read_csv_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.download.read_csv_files" title="Permalink to this definition"></a></dt>
<dd><p>Reads the csv files and converts them into dictionaries that can be used for downloading</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>This function returns three dictionaries</dt><dd><p>with EU number as keys and urls to files as values, and one dictionary with EU number as key and
an attribute dictionary as value.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(dict[str,str], dict[str,str], dict[str,str], dict[str,str])</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-web_scraper.ec_scraper">
<span id="web-scraper-ec-scraper-module"></span><h2>web_scraper.ec_scraper module<a class="headerlink" href="#module-web_scraper.ec_scraper" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.MedicineType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">MedicineType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.ec_scraper.MedicineType" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.MedicineType.HUMAN_USE_ACTIVE">
<span class="sig-name descname"><span class="pre">HUMAN_USE_ACTIVE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#web_scraper.ec_scraper.MedicineType.HUMAN_USE_ACTIVE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.MedicineType.HUMAN_USE_WITHDRAWN">
<span class="sig-name descname"><span class="pre">HUMAN_USE_WITHDRAWN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#web_scraper.ec_scraper.MedicineType.HUMAN_USE_WITHDRAWN" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.MedicineType.ORPHAN_ACTIVE">
<span class="sig-name descname"><span class="pre">ORPHAN_ACTIVE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#web_scraper.ec_scraper.MedicineType.ORPHAN_ACTIVE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.MedicineType.ORPHAN_WITHDRAWN">
<span class="sig-name descname"><span class="pre">ORPHAN_WITHDRAWN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#web_scraper.ec_scraper.MedicineType.ORPHAN_WITHDRAWN" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.determine_current_aut_type">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">determine_current_aut_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_decision_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.determine_current_aut_type" title="Permalink to this definition"></a></dt>
<dd><p>Determines the current authorization type for a medicine</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>last_decision_types</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The decision types from the last year and a half</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current decision type</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.determine_ema_number">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">determine_ema_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ema_numbers:</span> <span class="pre">list[str])</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'str'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'float'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.ec_scraper.determine_ema_number" title="Permalink to this definition"></a></dt>
<dd><p>Determines the right EMA number from the list of procedures</p>
<p>The right EMA number is simply the EMA number that occurs most often in the procedures table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ema_numbers</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The list of formatted EMA numbers in the JSON file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The function returns the EMA number that occurrs the most, and a fraction how often</dt><dd><p>this EMA number is present in the list.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str, float)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.determine_initial_aut_type">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">determine_initial_aut_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_exceptional</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_conditional</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.determine_initial_aut_type" title="Permalink to this definition"></a></dt>
<dd><p>Determines the initial authorization type, based on whether it has seen exceptional or conditional procedures</p>
<p>For procedures from before 2006, it is not possible to determine the initial authorization type. Otherwise
the procedure type van be determined, which is either exceptional, conditional or standard.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) – The year of the first procedure.</p></li>
<li><p><strong>is_exceptional</strong> (<em>bool</em>) – _description_</p></li>
<li><p><strong>is_conditional</strong> (<em>bool</em>) – _description_</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>_description_</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.format_ema_number">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">format_ema_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ema_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.format_ema_number" title="Permalink to this definition"></a></dt>
<dd><p>Formats the input into a (list of) EMA number(s)</p>
<p>In the procedures JSON file, there is often an EMA number present for a procedure, and sometimes multiple
The EMA numbers are formatted with a RegEx, that handles both EMA numbers for human use and orphan medicine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ema_number</strong> (<em>str</em>) – EMA number value directly fetched from the JSON, corresponding to a procedure</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of formatted EMA numbers. Usually it only contains one EMA number, but sometimes multiple</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.get_data_from_medicine_json">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">get_data_from_medicine_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">medicine_json:</span> <span class="pre">&lt;module</span> <span class="pre">'json'</span> <span class="pre">from</span> <span class="pre">'C:\\Python310\\lib\\json\\__init__.py'&gt;,</span> <span class="pre">eu_num:</span> <span class="pre">str,</span> <span class="pre">medicine_type:</span> <span class="pre">~web_scraper.ec_scraper.MedicineType)</span> <span class="pre">-&gt;</span> <span class="pre">(dict[str,</span> <span class="pre">str],</span> <span class="pre">list[str]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.ec_scraper.get_data_from_medicine_json" title="Permalink to this definition"></a></dt>
<dd><p>Gets all attribute information that is stored in the medicine JSON, and all links to the EMA website.</p>
<p>The function loops through the JSON object and finds all the attributes and links,
so that they can be used and stored. Whenever an attribute is not found, this is logged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>medicine_json</strong> (<em>json</em>) – The JSON object that contains all relevant attributes and links.</p></li>
<li><p><strong>eu_num</strong> (<em>str</em>) – The EU number for the medicine that belongs to this JSON.</p></li>
<li><p><strong>medicine_type</strong> (<a class="reference internal" href="#web_scraper.ec_scraper.MedicineType" title="web_scraper.ec_scraper.MedicineType"><em>MedicineType</em></a>) – The type of medicine that belongs to this JSON.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Returns a dictionary with all the attribute values and a list</dt><dd><p>with all the links to the EMA.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(dict[str, str], list[str])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.get_data_from_procedures_json">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">get_data_from_procedures_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">procedures_json:</span> <span class="pre">&lt;module</span> <span class="pre">'json'</span> <span class="pre">from</span> <span class="pre">'C:\\Python310\\lib\\json\\__init__.py'&gt;,</span> <span class="pre">eu_num:</span> <span class="pre">str)</span> <span class="pre">-&gt;</span> <span class="pre">(dict[str,</span> <span class="pre">str],</span> <span class="pre">list[str],</span> <span class="pre">list[str]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.ec_scraper.get_data_from_procedures_json" title="Permalink to this definition"></a></dt>
<dd><p>Gets all attribute information that is stored in the procedures JSON, and all links the decision and annex pdf’s.</p>
<p>The function loops through the JSON object and finds all the attributes and links,
so that they can be used and stored. There is also some extra logic that is needed to determine some of the attribute
values. This is done for the EMA number (certainty), the initial authorization type and current authorization type.
Whenever an attribute is not found, this is logged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>procedures_json</strong> (<em>json</em>) – The JSON object that contains all relevant attributes and links</p></li>
<li><p><strong>eu_num</strong> (<em>str</em>) – The EU number for the medicine that belongs to this JSON</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Returns a dictionary with all the attribute values, a list</dt><dd><p>with all the links decisions and a list with a the links to the annexes.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(dict[str, str], list[str], list[str])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.get_ec_html">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">get_ec_html</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Response</span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.get_ec_html" title="Permalink to this definition"></a></dt>
<dd><p>Fetches the html from a website.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> (<em>str</em>) – The link to the page where the html is needed from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns a Response object that contains the response to the HTTP request.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>requests.Response</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.get_ec_json_objects">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">get_ec_json_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">html_active</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Response</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list[&lt;module</span> <span class="pre">'json'</span> <span class="pre">from</span> <span class="pre">'C:\\Python310\\lib\\json\\__init__.py'&gt;]</span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.get_ec_json_objects" title="Permalink to this definition"></a></dt>
<dd><p>Gets all the JSON objects from a web page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>html_active</strong> (<em>requests.Response</em>) – The response to the HTTP request for the page where the JSONs need
to be fetched from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All the JSONs on the web page are returned in a list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list[json]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.scrape_active_withdrawn_jsons">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">scrape_active_withdrawn_jsons</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list[&lt;module</span> <span class="pre">'json'</span> <span class="pre">from</span> <span class="pre">'C:\\Python310\\lib\\json\\__init__.py'&gt;]</span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.scrape_active_withdrawn_jsons" title="Permalink to this definition"></a></dt>
<dd><p>Scrape the EC website for active and withdrawn medicine JSONs.</p>
<p>The JSON files that are scraped are needed to construct the url to each individual medicine page.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of JSONs that for active and withdrawn, human use and orphan medicine.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[json]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.scrape_medicine_page">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">scrape_medicine_page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">medicine_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#web_scraper.ec_scraper.MedicineType" title="web_scraper.ec_scraper.MedicineType"><span class="pre">MedicineType</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web_scraper.ec_scraper.scrape_medicine_page" title="Permalink to this definition"></a></dt>
<dd><p>Scrapes a medicine page for all pdf urls, urls to the ema website and attributes for a single medicine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – The url to the medicine page for the medicine that needs to be scraped.</p></li>
<li><p><strong>medicine_type</strong> (<a class="reference internal" href="#web_scraper.ec_scraper.MedicineType" title="web_scraper.ec_scraper.MedicineType"><em>MedicineType</em></a>) – The type of medicine this medicine is.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>All the links to pdf’s for decisions and annexes are</dt><dd><p>stored in lists and returned. The same is done for all links to the ema website. All attributes are
stored in a dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(list[str], list[str], list[str], dict[str, str])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.scrape_medicines_list">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">scrape_medicines_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.scrape_medicines_list" title="Permalink to this definition"></a></dt>
<dd><p>Scrape the EC website, and construct urls to all individual medicine pages.</p>
<p>From the EC website, the JSON files for active and withdrawn medicine are scraped. The JSONs
contain information about the medicine that is needed to construct a link to each individual medicine page.
It does so for all active and withrawn, orphan and human use medicine.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The links to the medicine pages are stored in a list, along with the full EU number,</dt><dd><p>the medicine type and a short EU number.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[(str, str, int, str)]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ec_scraper.scrape_refused_jsons">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ec_scraper.</span></span><span class="sig-name descname"><span class="pre">scrape_refused_jsons</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list[&lt;module</span> <span class="pre">'json'</span> <span class="pre">from</span> <span class="pre">'C:\\Python310\\lib\\json\\__init__.py'&gt;]</span></span></span><a class="headerlink" href="#web_scraper.ec_scraper.scrape_refused_jsons" title="Permalink to this definition"></a></dt>
<dd><p>Scrape the EC website for refused medicine JSONs.</p>
<p>The JSON files that are scraped are needed to construct the url to each individual medicine page.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of JSONs that for refused, human use and orphan medicine.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[json]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-web_scraper.ema_scraper">
<span id="web-scraper-ema-scraper-module"></span><h2>web_scraper.ema_scraper module<a class="headerlink" href="#module-web_scraper.ema_scraper" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.ema_scraper.pdf_links_from_url">
<span class="sig-prename descclassname"><span class="pre">web_scraper.ema_scraper.</span></span><span class="sig-name descname"><span class="pre">pdf_links_from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#web_scraper.ema_scraper.pdf_links_from_url" title="Permalink to this definition"></a></dt>
<dd><p>Gets the pdf link on the EMA website that is highest on the priority list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> (<em>str</em>) – Link to the medicine page on the EMA website</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>Exception</strong> – If nothing is found, we throw an exception. This also passes all found URLs on newlines</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The pdf link that is highest on the priority list</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-web_scraper.utils">
<span id="web-scraper-utils-module"></span><h2>web_scraper.utils module<a class="headerlink" href="#module-web_scraper.utils" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="web_scraper.utils.exception_retry">
<span class="sig-prename descclassname"><span class="pre">web_scraper.utils.</span></span><span class="sig-name descname"><span class="pre">exception_retry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_attempts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#web_scraper.utils.exception_retry" title="Permalink to this definition"></a></dt>
<dd><p>Abstract function that retries a function a maximum of four times if it throws an exception</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Function to retry</p></li>
<li><p><strong>max_attempts</strong> (<em>int</em><em>, </em><em>optional</em>) – Maximum number of attempts that the function is called. Defaults to 4.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Function passed without exception, return true. Function threw an exception, return false</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-web_scraper">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-web_scraper" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="web_scraper" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="web_scraper.tests.html" class="btn btn-neutral float-right" title="web_scraper.tests package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Medisee.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>